<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <style>

    body {
      width: 100%;
      height: 100%;
    }

  </style>
  <link rel="stylesheet" href="revealjs-diagram.css">
</head>
<body>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="revealjs-diagram.js"></script>
  <script>

    var treeData = {
      name: 'SPA - Web front',
      x0: window.diagram.height / 2,
      y0: 0,
      children: []
    };
    
    function addChildren_1() {
      window.diagram.addItem('GeoServer', 'SPA - Web front', treeData)();
      window.diagram.addItem('WebService', 'SPA - Web front', treeData)();
      setTimeout(function() {
        window.diagram.addItem('OpenAM', 'SPA - Web front', treeData)();
        window.diagram.addLink('WebService', 'OpenAM', treeData)();
      }, 300);
      
    };

    // function addChildren_2() {
    //   window.diagram.addLink('WebService', 'OpenAM', treeData)();
    // };

    function change_node() {
      window.diagram.removeItem('OpenAM', treeData)();
      setTimeout(function() {      
      window.diagram.addItem('Cognito', 'SPA - Web front', treeData)();
      window.diagram.addLink('Cognito', 'WebService')();
      }, 800);      

    };

    setTimeout(addChildren_1, 1500);

    var _transitions = [
      // window.diagram.addItem('GeoServer', 'SPA - Web front', treeData),
      // window.diagram.addItem('WebService', 'SPA - Web front', treeData),
      // window.diagram.addItem('OpenAM', 'SPA - Web front', treeData),
      // window.diagram.addLink('WebService', 'OpenAM', treeData),
      // window.diagram.addItem('Cognito', 'SPA - Web front', treeData),      
      // // window.diagram.addItem('GeoServer', 'SPA - Web front', treeData),
      // // window.diagram.addItem('OpenAM', 'SPA - Web front', treeData),
      // // window.diagram.addItem('WebService', 'OpenAM', treeData),
      // window.diagram.addItem('Cognito', 'SPA - Web front', treeData),


      // addChildren_1,
      // addChildren_2,
      
      change_node,
      // window.diagram.addLink('WebService', 'Cognito', treeData),
    ];

    var _inverse_transitions = [
      // window.diagram.removeItem('child 1', treeData),
      // window.diagram.removeItem('child 2', treeData),
      // window.diagram.removeItem('sub-child 1', treeData),
      // window.diagram.removeItem('sub-child 2', treeData),
    ];

    // start the tree
    window.diagram.register('basic', function() {
      window.diagram.init(treeData);
    });
  </script>
</body>